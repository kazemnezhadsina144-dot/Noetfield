<!-- /gate/partners/hub/index.html — Noetfield Partner Hub v1.0 (single ops surface • RID continuity • deal registration • delegation-ready) -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Noetfield — Partner Hub</title>
  <meta name="description" content="Operational hub for Noetfield partners. Route work by lane (Channel/Delivery/Integration), register deals, preserve Request ID continuity, and generate board/procurement-ready handoffs." />
  <meta name="robots" content="index,follow" />
  <meta name="author" content="Noetfield Systems Inc." />
  <meta name="theme-color" content="#07070b" />

  <link rel="canonical" href="https://www.noetfield.com/gate/partners/hub/" />

  <link rel="icon" href="/noetfield-favicon-512.png" type="image/png" />
  <link rel="apple-touch-icon" href="/noetfield-favicon-512.png" />

  <!-- Open Graph -->
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Noetfield" />
  <meta property="og:title" content="Partner Hub" />
  <meta property="og:description" content="Route partner work, register deals, and generate controlled handoffs with Request ID continuity." />
  <meta property="og:url" content="https://www.noetfield.com/gate/partners/hub/" />

  <!-- Shell (your existing shared layout/theme) -->
  <link rel="stylesheet" href="/assets/noetfield-shell.css" />

  <style>
    /* Page-local additions (kept small on purpose; relies on shell theme tokens) */
    .nf-wrap{max-width:1160px;margin:0 auto;padding:22px 16px 56px}
    .nf-grid{display:grid;grid-template-columns:1.35fr .65fr;gap:18px;align-items:start}
    @media (max-width: 960px){.nf-grid{grid-template-columns:1fr}}
    .nf-hero{padding:16px 16px 14px}
    .nf-hero h1{margin:0 0 6px;font-size:20px;letter-spacing:.2px}
    .nf-hero p{margin:0;color:var(--muted);line-height:1.5}
    .nf-badges{display:flex;flex-wrap:wrap;gap:8px;margin-top:12px}
    .nf-badge{font-size:12px;padding:6px 10px;border:1px solid var(--line);border-radius:999px;background:rgba(255,255,255,.03)}
    .nf-card{padding:14px}
    .nf-card h2{margin:0 0 10px;font-size:14px;letter-spacing:.2px}
    .nf-card p{margin:0 0 10px;color:var(--muted);line-height:1.5}
    .nf-rows{display:grid;gap:10px}
    .nf-row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    @media (max-width: 640px){.nf-row{grid-template-columns:1fr}}
    .nf-field label{display:block;font-size:12px;color:var(--muted);margin:0 0 6px}
    .nf-field input,.nf-field select,.nf-field textarea{
      width:100%;border:1px solid var(--line);background:rgba(255,255,255,.03);
      color:var(--text);border-radius:10px;padding:10px 10px;outline:none;
    }
    .nf-field textarea{min-height:92px;resize:vertical}
    .nf-actions{display:flex;flex-wrap:wrap;gap:10px;margin-top:10px}
    .nf-btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;
      padding:10px 12px;border-radius:10px;border:1px solid var(--line);
      background:rgba(255,255,255,.04);color:var(--text);text-decoration:none;
      cursor:pointer;font-weight:600;font-size:13px;
    }
    .nf-btn.primary{background:rgba(255,255,255,.10)}
    .nf-btn.ghost{background:transparent}
    .nf-mini{font-size:12px;color:var(--muted);margin-top:10px}
    .nf-rail{position:sticky;top:14px}
    .nf-kv{display:grid;gap:8px;margin-top:10px}
    .nf-kv .k{font-size:12px;color:var(--muted)}
    .nf-kv .v{font-size:13px}
    .nf-out{
      margin-top:10px;border:1px dashed var(--line);border-radius:12px;padding:10px;
      background:rgba(0,0,0,.18)
    }
    .nf-out pre{margin:0;white-space:pre-wrap;word-break:break-word;font-size:12px;color:var(--text)}
    .nf-split{display:grid;gap:12px}
    .nf-links{display:grid;gap:8px}
    .nf-links a{display:flex;justify-content:space-between;gap:10px;padding:10px 12px;border-radius:12px;border:1px solid var(--line);text-decoration:none;color:var(--text);background:rgba(255,255,255,.03)}
    .nf-links a span{color:var(--muted);font-size:12px}
  </style>

  <!-- JSON-LD -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"WebPage",
    "name":"Noetfield Partner Hub",
    "url":"https://www.noetfield.com/gate/partners/hub/",
    "isPartOf":{"@type":"WebSite","name":"Noetfield","url":"https://www.noetfield.com/"},
    "about":"Partner operations and deal registration for Noetfield engagements."
  }
  </script>
</head>

<body>
  <!-- Shell injects header/footer -->
  <main class="nf-wrap">
    <section class="nf-card nf-hero">
      <h1>Partner Hub</h1>
      <p>Single operational surface to route partner work, preserve Request ID continuity, and register deals with controlled handoffs.</p>
      <div class="nf-badges">
        <div class="nf-badge">RID continuity</div>
        <div class="nf-badge">Lane routing</div>
        <div class="nf-badge">Deal registration</div>
        <div class="nf-badge">Delegation-ready</div>
      </div>
    </section>

    <div class="nf-grid" style="margin-top:14px">
      <!-- LEFT: primary ops -->
      <div class="nf-split">

        <!-- Lane Router -->
        <section class="nf-card">
          <h2>1) Route work by lane</h2>
          <p>Pick the operational lane. Links carry <strong>rid</strong> automatically (query + localStorage fallback).</p>

          <div class="nf-links" id="laneLinks">
            <a href="/gate/partners/channel/" data-rid-link>
              <strong>Channel</strong>
              <span>referral partners • reseller motion • outbound</span>
            </a>
            <a href="/gate/partners/delivery/" data-rid-link>
              <strong>Delivery</strong>
              <span>implementation • assessments • reporting</span>
            </a>
            <a href="/gate/partners/integration/" data-rid-link>
              <strong>Integration</strong>
              <span>connectors • technical enablement • handoffs</span>
            </a>
            <a href="/gate/procurement/" data-rid-link>
              <strong>Procurement lane</strong>
              <span>invoice/PO • vendor onboarding • email builder</span>
            </a>
          </div>

          <div class="nf-mini">Operational rule: avoid confidential data in web forms. Use Request ID + controlled exports.</div>
        </section>

        <!-- Deal Registration -->
        <section class="nf-card" id="dealReg">
          <h2>2) Register a partner deal</h2>
          <p>Generates <strong>Deal ID</strong> + internal handoff + a client-facing link to start the deal room.</p>

          <div class="nf-rows">
            <div class="nf-row">
              <div class="nf-field">
                <label for="partnerOrg">Partner organization</label>
                <input id="partnerOrg" type="text" placeholder="e.g., Contoso Advisory" autocomplete="organization" />
              </div>
              <div class="nf-field">
                <label for="partnerName">Partner contact</label>
                <input id="partnerName" type="text" placeholder="Full name" autocomplete="name" />
              </div>
            </div>

            <div class="nf-row">
              <div class="nf-field">
                <label for="partnerEmail">Partner email</label>
                <input id="partnerEmail" type="email" placeholder="name@domain.com" autocomplete="email" />
              </div>
              <div class="nf-field">
                <label for="partnerRole">Partner lane</label>
                <select id="partnerRole">
                  <option value="channel">Channel</option>
                  <option value="delivery">Delivery</option>
                  <option value="integration">Integration</option>
                </select>
              </div>
            </div>

            <div class="nf-row">
              <div class="nf-field">
                <label for="clientOrg">Client organization</label>
                <input id="clientOrg" type="text" placeholder="e.g., Example Bank / Health Authority" />
              </div>
              <div class="nf-field">
                <label for="package">Package / SKU</label>
                <select id="package">
                  <option value="copilot_readiness_2w">Copilot Readiness — Starter (2 weeks)</option>
                  <option value="copilot_readiness_4w" selected>Copilot Readiness — Standard (4 weeks)</option>
                  <option value="copilot_readiness_6w">Copilot Readiness — Extended (6 weeks)</option>
                  <option value="copilot_quickscan">Copilot QuickScan — Rapid Snapshot (5–7 days)</option>
                  <option value="trust_brief">Trust Brief — 6-week pilot</option>
                </select>
              </div>
            </div>

            <div class="nf-row">
              <div class="nf-field">
                <label for="estValue">Estimated contract value (CAD)</label>
                <input id="estValue" type="text" inputmode="numeric" placeholder="e.g., 15000" />
              </div>
              <div class="nf-field">
                <label for="closeDate">Target close date</label>
                <input id="closeDate" type="date" />
              </div>
            </div>

            <div class="nf-field">
              <label for="notes">Notes (non-confidential)</label>
              <textarea id="notes" placeholder="Constraints, timing, procurement notes, stakeholders (no sensitive data)."></textarea>
            </div>
          </div>

          <div class="nf-actions">
            <button class="nf-btn primary" id="btnGenerate">Generate Deal ID + Handoff</button>
            <button class="nf-btn" id="btnCopy">Copy handoff</button>
            <a class="nf-btn ghost" href="/app/" data-rid-link id="btnOpenApp">Open /app deal room</a>
          </div>

          <div class="nf-out" id="handoffBox" style="display:none">
            <pre id="handoffText"></pre>
          </div>

          <div class="nf-mini">
            Default SLA: deal registration acknowledged within <strong>1 business day</strong>. Delivery scheduling confirmed after scope lock + procurement lane check.
          </div>
        </section>

        <!-- Workbench -->
        <section class="nf-card">
          <h2>3) Partner workbench</h2>
          <p>Use Request ID to track status, review artifacts, and route procurement.</p>

          <div class="nf-actions">
            <a class="nf-btn" href="/status/" data-rid-link>Check status (/status)</a>
            <a class="nf-btn" href="/gate/" data-rid-link>Gate (/gate)</a>
            <a class="nf-btn" href="/faq/" data-rid-link>FAQ</a>
          </div>

          <div class="nf-mini">Operational tip: pin one RID per engagement; reuse it across procurement email, status checks, and artifact delivery.</div>
        </section>

      </div>

      <!-- RIGHT: rail -->
      <aside class="nf-rail">
        <section class="nf-card">
          <h2>Current Request ID</h2>
          <p>Auto-detected and preserved across partner flows.</p>

          <div class="nf-kv">
            <div class="k">rid</div>
            <div class="v" id="ridView">—</div>
            <div class="k">Source</div>
            <div class="v" id="ridSrc">—</div>
          </div>

          <div class="nf-actions" style="margin-top:12px">
            <button class="nf-btn" id="btnNewRid">Generate new rid</button>
            <button class="nf-btn ghost" id="btnClearRid">Clear rid</button>
          </div>

          <div class="nf-mini">
            Rule: never put confidential data in URLs. RID is a routing token, not a payload container.
          </div>
        </section>

        <section class="nf-card" style="margin-top:12px">
          <h2>Delegation map</h2>
          <p>When adding admins later, assign by lane:</p>
          <div class="nf-kv">
            <div class="k">Channel admin</div><div class="v">Owns referrals + deal reg</div>
            <div class="k">Delivery admin</div><div class="v">Owns scheduling + outputs</div>
            <div class="k">Integration admin</div><div class="v">Owns connectors + handoffs</div>
          </div>
        </section>
      </aside>
    </div>
  </main>

  <script src="/assets/noetfield-shell.js" defer></script>

  <script>
    // Partner Hub core: RID continuity + deal registration
    (function () {
      const qs = new URLSearchParams(location.search);
      const ridFromQuery = (qs.get("rid") || "").trim();
      const ridFromStore = (localStorage.getItem("nf_rid") || "").trim();

      function genRID() {
        // Short, readable, URL-safe. Not a secret.
        const t = Date.now().toString(36);
        const r = Math.random().toString(36).slice(2, 8);
        return ("NF-" + t + "-" + r).toUpperCase();
      }

      function setRID(rid, source) {
        const v = (rid || "").trim();
        if (!v) return;
        localStorage.setItem("nf_rid", v);
        document.getElementById("ridView").textContent = v;
        document.getElementById("ridSrc").textContent = source || "unknown";
        applyRidLinks(v);
        // keep URL tidy but persistent
        const u = new URL(location.href);
        u.searchParams.set("rid", v);
        history.replaceState({}, "", u.toString());
      }

      function clearRID() {
        localStorage.removeItem("nf_rid");
        document.getElementById("ridView").textContent = "—";
        document.getElementById("ridSrc").textContent = "—";
        applyRidLinks("");
        const u = new URL(location.href);
        u.searchParams.delete("rid");
        history.replaceState({}, "", u.toString());
      }

      function applyRidLinks(rid) {
        document.querySelectorAll("[data-rid-link]").forEach(a => {
          try {
            const href = a.getAttribute("href");
            if (!href) return;
            const url = new URL(href, location.origin);
            if (rid) url.searchParams.set("rid", rid);
            else url.searchParams.delete("rid");
            a.setAttribute("href", url.pathname + (url.search ? url.search : ""));
          } catch (_) {}
        });
      }

      // init RID
      if (ridFromQuery) setRID(ridFromQuery, "query");
      else if (ridFromStore) {
        document.getElementById("ridView").textContent = ridFromStore;
        document.getElementById("ridSrc").textContent = "localStorage";
        applyRidLinks(ridFromStore);
      } else {
        document.getElementById("ridView").textContent = "—";
        document.getElementById("ridSrc").textContent = "none";
      }

      // rail actions
      document.getElementById("btnNewRid").addEventListener("click", () => setRID(genRID(), "generated"));
      document.getElementById("btnClearRid").addEventListener("click", clearRID);

      // Deal registration
      const el = (id) => document.getElementById(id);

      function genDealId() {
        const d = new Date();
        const y = d.getFullYear().toString().slice(-2);
        const m = String(d.getMonth() + 1).padStart(2, "0");
        const day = String(d.getDate()).padStart(2, "0");
        const r = Math.random().toString(36).slice(2, 7).toUpperCase();
        return `DL-${y}${m}${day}-${r}`;
      }

      function normMoney(v) {
        const n = String(v || "").replace(/[^\d]/g, "");
        return n ? Number(n).toLocaleString("en-CA") : "—";
      }

      function currentRID() {
        return (localStorage.getItem("nf_rid") || "").trim() || (new URLSearchParams(location.search).get("rid") || "").trim();
      }

      el("btnGenerate").addEventListener("click", () => {
        const rid = currentRID() || genRID();
        setRID(rid, rid ? "active" : "generated");

        const dealId = genDealId();
        const partnerOrg = (el("partnerOrg").value || "").trim() || "—";
        const partnerName = (el("partnerName").value || "").trim() || "—";
        const partnerEmail = (el("partnerEmail").value || "").trim() || "—";
        const partnerRole = el("partnerRole").value;
        const clientOrg = (el("clientOrg").value || "").trim() || "—";
        const pkg = el("package").value;
        const est = normMoney(el("estValue").value);
        const close = (el("closeDate").value || "").trim() || "—";
        const notes = (el("notes").value || "").trim() || "—";

        const appLink = new URL("/app/", location.origin);
        appLink.searchParams.set("rid", rid);

        const hubLink = new URL(location.href);
        hubLink.searchParams.set("rid", rid);

        const laneLink = new URL(`/gate/partners/${partnerRole}/`, location.origin);
        laneLink.searchParams.set("rid", rid);

        const handoff =
`NOETFIELD — PARTNER DEAL REGISTRATION
Deal ID: ${dealId}
Request ID (rid): ${rid}

Partner
- Organization: ${partnerOrg}
- Contact: ${partnerName}
- Email: ${partnerEmail}
- Lane: ${partnerRole}

Client
- Organization: ${clientOrg}
- Package/SKU: ${pkg}
- Est. Value (CAD): ${est}
- Target Close: ${close}

Notes (non-confidential)
${notes}

Links
- Partner Hub: ${hubLink.toString()}
- Lane: ${laneLink.toString()}
- Deal Room (/app): ${appLink.toString()}

Ops
- Next step: scope lock → procurement lane check → schedule → deliver artifacts.
- Reminder: do not share confidential data in web forms or URLs.`;

        el("handoffText").textContent = handoff;
        el("handoffBox").style.display = "block";
        el("handoffBox").scrollIntoView({behavior:"smooth", block:"nearest"});

        // Persist partner identity (for speed next time)
        localStorage.setItem("nf_partner_org", partnerOrg !== "—" ? partnerOrg : "");
        localStorage.setItem("nf_partner_name", partnerName !== "—" ? partnerName : "");
        localStorage.setItem("nf_partner_email", partnerEmail !== "—" ? partnerEmail : "");
      });

      el("btnCopy").addEventListener("click", async () => {
        const txt = el("handoffText").textContent || "";
        if (!txt) return;
        try { await navigator.clipboard.writeText(txt); } catch (_) {}
      });

      // preload partner identity
      const po = (localStorage.getItem("nf_partner_org") || "").trim();
      const pn = (localStorage.getItem("nf_partner_name") || "").trim();
      const pe = (localStorage.getItem("nf_partner_email") || "").trim();
      if (po) el("partnerOrg").value = po;
      if (pn) el("partnerName").value = pn;
      if (pe) el("partnerEmail").value = pe;

    })();
  </script>
</body>
</html>
